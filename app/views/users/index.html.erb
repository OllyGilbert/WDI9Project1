<h1>Listing users</h1>
  <div class="search">
    <%= search_form_for @q do |f| %> 
        <%= f.condition_fields do |c|%>
          <div class="field">
          <%= c.attribute_fields do |a| %> 
              <%= a.attribute_select %>
          <% end %>
          <%= c.predicate_select %> 
            <%= c.value_fields do |v| %>
              <%= v.text_field :value %>
            <% end %>
          </div>
          <% end %>
        <%= f.submit %>
      <% end %>
    </div>
<table>
  <tr>
    <th>Name</th>
    <th>Role</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @users.each do |user| %>
  <tr>
    <td><%= user.name %></td>
    <td><%= user.role %></td>

    <td>
      <% if can? :show, user %>
        <%= link_to 'Show', user %>
      <% end %>
    </td>
    <td>
      <% if can? :update, user %>
        <%= link_to 'Edit', edit_user_path(user) %>
      <% end %>
    </td>
    <td>
      <% if can? :destroy, user %>
        <%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %>
      <% end %>
    </td>
  </tr>
<% end %>
</table>

<br />
<%= paginate @users %>
<%= link_to 'New User', new_user_path %>
